{
    "version": "https://jsonfeed.org/version/1",
    "title": "Chen • All posts by \"git\" tag",
    "description": "",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/2024/01/27/redis%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/",
            "url": "http://example.com/2024/01/27/redis%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/",
            "title": "redis学习记录",
            "date_published": "2024-01-27T04:46:04.000Z",
            "content_html": "<p><em>大三上的寒假，玩了两周后，觉得该学一些东西了，于是在 b 站上找项目跟做，最后在鱼皮的推荐下，跟做了黑马的 redis。</em></p>\n<h3 id=\"问题1resp连接不上虚拟机上的redis\"><a class=\"anchor\" href=\"#问题1resp连接不上虚拟机上的redis\">#</a> 问题 1：RESP 连接不上虚拟机上的 redis</h3>\n<h4 id=\"搜索了csdnresp项目下的issue做了如下操作\"><a class=\"anchor\" href=\"#搜索了csdnresp项目下的issue做了如下操作\">#</a> 搜索了 CSDN，RESP 项目下的 issue，做了如下操作：</h4>\n<p>我检查了配置文件，重新按照安装说明配置了一遍 redis，都无法解决</p>\n<p>—&gt; 不是 redis 的问题</p>\n<p>我又试了试我电脑能不能 ping 上虚拟机，查找了如何获取虚拟机的 ip（ <code>ip addr</code> ），ping 成功了</p>\n<p>—&gt; 不是我电脑的问题</p>\n<p>虚拟机没学，于是我也束手无策了</p>\n<p>吃完饭后又尝试搜了一下，看了一下 <a href=\"%5B%E5%85%8D%E8%B4%B9Redis%E5%9B%BE%E5%BD%A2%E5%8C%96%E7%95%8C%E9%9D%A2%EF%BC%88RESP%EF%BC%89%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80%E5%92%8C%E8%BF%9E%E6%8E%A5%E6%AD%A5%E9%AA%A4_resp%E4%B8%8B%E8%BD%BD-CSDN%E5%8D%9A%E5%AE%A2%5D(https://blog.csdn.net/drhnb/article/details/131717836)\">免费 Redis 图形化界面（RESP）下载地址和连接步骤</a> ，发现里面有写到连接不上的问题，是 linux 的防火墙拦截了（不太懂 ping 的规则，能 ping 成功，但是防火墙会拦截）</p>\n<h4 id=\"连接不成功尝试在linux中执行下面的两个命令\"><a class=\"anchor\" href=\"#连接不成功尝试在linux中执行下面的两个命令\">#</a> 连接不成功：尝试在 linux 中执行下面的两个命令：</h4>\n<p>以下命令是用于配置 Linux 防火墙（firewalld）以开放指定的端口 （6379/tcp）。<br />\n1、</p>\n<pre><code>firewall-cmd --zone=public --add-port=6379/tcp --permanent\n</code></pre>\n<p>这个命令添加一个规则到 “public” 区域（zone）的防火墙配置中，允许通过端口 6379 的 TCP 连接。–permanent 参数表示该规则将被永久保存，重新启动后仍然有效。</p>\n<p>2、</p>\n<pre><code>firewall-cmd --reload\n</code></pre>\n<p>这个命令重新加载防火墙规则，使最新的修改生效。当你添加、删除或修改防火墙规则时，都需要执行这个命令才能使更改生效。</p>\n<p>注意事项：</p>\n<p>以上命令需要以管理员权限（例如 root 用户或者使用 sudo）来执行。<br />\n1、在执行前，请确保已经安装了 firewalld，并且正在运行。<br />\n2、6379 是 Redis 默认的端口号，如果你在使用其他端口，则需要相应地修改上述命令中的端口号。</p>\n<h3 id=\"git问题\"><a class=\"anchor\" href=\"#git问题\">#</a> git 问题</h3>\n<pre><code>F:\\HexoBlog2&gt;ssh -T git@github.com\nssh: connect to host github.com port 22: Connection timed out\n</code></pre>\n<h4 id=\"解决\"><a class=\"anchor\" href=\"#解决\">#</a> 解决</h4>\n<p>此处是端口问题，可能是被占用了或者什么的</p>\n<pre><code>$ git clone git@github.com:xxxxx/xxxx.git my-awesome-proj\nCloning into 'my-awesome-proj'...\nssh: connect to host github.com port 22: Connection timed out\nfatal: Could not read from remote repository.\n\n$ # This should also timeout\n$ ssh -T git@github.com\nssh: connect to host github.com port 22: Connection timed out\n\n$ # but this might work\n$ # 换个端口尝试，成功\n$ ssh -T -p 443 git@ssh.github.com\nHi xxxx! You've successfully authenticated, but GitHub does not provide shell access.\n\n$ # Override SSH settings\n$ # 添加一个配置文件，会读取该文件，使用配置的端口\n$ vim ~/.ssh/config\n```\n# Add section below to it\nHost github.com\n  Hostname ssh.github.com\n  Port 443\n```\n$ ssh -T git@github.com\nHi xxxxx! You've successfully authenticated, but GitHub does not\nprovide shell access.\n\n$ git clone git@github.com:xxxxxx/xxxxx.git my-awesome-proj\nCloning into 'my-awesome-proj'...\nremote: Enumerating objects: 15, done.\nremote: Counting objects: 100% (15/15), done.\nremote: Compressing objects: 100% (14/14), done.\nremote: Total 15 (delta 0), reused 15 (delta 0), pack-reused 0\nReceiving objects: 100% (15/15), 22.90 KiB | 4.58 MiB/s, done.\n</code></pre>\n<h3 id=\"记录\"><a class=\"anchor\" href=\"#记录\">#</a> 记录</h3>\n<h4 id=\"短信登陆部分\"><a class=\"anchor\" href=\"#短信登陆部分\">#</a> 短信登陆部分</h4>\n<p><img data-src=\"image-20240412122633753.png\" alt=\"image-20240412122633753\" /></p>\n<p><img data-src=\"image-20240412122758798.png\" alt=\"image-20240412122758798\" /></p>\n<p><img data-src=\"image-20240412123054149.png\" alt=\"image-20240412123054149\" /></p>\n<h4 id=\"缓存\"><a class=\"anchor\" href=\"#缓存\">#</a> 缓存</h4>\n<p><img data-src=\"image-20240412123942695.png\" alt=\"image-20240412123942695\" /></p>\n<p><img data-src=\"image-20240412124114988.png\" alt=\"image-20240412124114988\" /></p>\n<h5 id=\"缓存更新策略\"><a class=\"anchor\" href=\"#缓存更新策略\">#</a> 缓存更新策略</h5>\n<p><img data-src=\"image-20240412124326274.png\" alt=\"image-20240412124326274\" /></p>\n<p><img data-src=\"image-20240412124636426.png\" alt=\"image-20240412124636426\" /></p>\n<p>一般用第一个<img data-src=\"image-20240412124808845.png\" alt=\"image-20240412124808845\" /></p>\n<p><img data-src=\"image-20240412125028236.png\" alt=\"image-20240412125028236\" /></p>\n<h5 id=\"缓存穿透\"><a class=\"anchor\" href=\"#缓存穿透\">#</a> 缓存穿透</h5>\n<p><img data-src=\"image-20240412130240329.png\" alt=\"image-20240412130240329\" /></p>\n<h5 id=\"缓存雪崩\"><a class=\"anchor\" href=\"#缓存雪崩\">#</a> 缓存雪崩</h5>\n<p><img data-src=\"image-20240412130346583.png\" alt=\"image-20240412130346583\" /></p>\n<h5 id=\"缓存击穿\"><a class=\"anchor\" href=\"#缓存击穿\">#</a> 缓存击穿</h5>\n<p><img data-src=\"image-20240412130622535.png\" alt=\"image-20240412130622535\" /></p>\n<p><img data-src=\"image-20240412130742006.png\" alt=\"image-20240412130742006\" /></p>\n<p><img data-src=\"image-20240412130802722.png\" alt=\"image-20240412130802722\" /></p>\n<p><img data-src=\"image-20240412131031442.png\" alt=\"image-20240412131031442\" /></p>\n<p><img data-src=\"image-20240412131423996.png\" alt=\"image-20240412131423996\" /></p>\n<h4 id=\"优惠券秒杀\"><a class=\"anchor\" href=\"#优惠券秒杀\">#</a> 优惠券秒杀</h4>\n<h5 id=\"全局id生成器\"><a class=\"anchor\" href=\"#全局id生成器\">#</a> 全局 ID 生成器</h5>\n<p><img data-src=\"image-20240412140415747.png\" alt=\"image-20240412140415747\" /></p>\n<p><img data-src=\"image-20240412140436380.png\" alt=\"image-20240412140436380\" /></p>\n<h5 id=\"实现功能\"><a class=\"anchor\" href=\"#实现功能\">#</a> 实现功能</h5>\n<p><img data-src=\"image-20240412140853291.png\" alt=\"image-20240412140853291\" /></p>\n<h5 id=\"超卖问题\"><a class=\"anchor\" href=\"#超卖问题\">#</a> 超卖问题</h5>\n<p><img data-src=\"image-20240412141102576.png\" alt=\"image-20240412141102576\" /></p>\n<p><img data-src=\"image-20240412141125679.png\" alt=\"image-20240412141125679\" /></p>\n<p><img data-src=\"image-20240412141309616.png\" alt=\"image-20240412141309616\" /></p>\n<p><img data-src=\"image-20240412141410276.png\" alt=\"image-20240412141410276\" /></p>\n<h5 id=\"一人一单功能\"><a class=\"anchor\" href=\"#一人一单功能\">#</a> 一人一单功能</h5>\n<p><img data-src=\"image-20240412141516843.png\" alt=\"image-20240412141516843\" /></p>\n<h4 id=\"分布式锁\"><a class=\"anchor\" href=\"#分布式锁\">#</a> 分布式锁</h4>\n<h5 id=\"并发安全问题\"><a class=\"anchor\" href=\"#并发安全问题\">#</a> 并发安全问题</h5>\n<p>多个 JVM 的锁监视器不一样，会同时放行</p>\n<p><img data-src=\"image-20240412142353714.png\" alt=\"image-20240412142353714\" /></p>\n<h5 id=\"基于redis的分布式锁\"><a class=\"anchor\" href=\"#基于redis的分布式锁\">#</a> 基于 Redis 的分布式锁</h5>\n<p><img data-src=\"image-20240412142523089.png\" alt=\"image-20240412142523089\" /></p>\n<h5 id=\"超时释放导致误删\"><a class=\"anchor\" href=\"#超时释放导致误删\">#</a> 超时释放导致误删</h5>\n<p><img data-src=\"image-20240412144240999.png\" alt=\"image-20240412144240999\" /><br />\n<img data-src=\"image-20240412144612172.png\" alt=\"image-20240412144612172\" /></p>\n<h5 id=\"原子性问题-事务\"><a class=\"anchor\" href=\"#原子性问题-事务\">#</a> 原子性问题 （事务）</h5>\n<p><img data-src=\"image-20240412145321833.png\" alt=\"image-20240412145321833\" /></p>\n<p>解决方法</p>\n<p>用 Lua 脚本批量执行命令，达到原子性</p>\n<p><img data-src=\"image-20240412160658766.png\" alt=\"image-20240412160658766\" /></p>\n<h5 id=\"redission\"><a class=\"anchor\" href=\"#redission\">#</a> Redission</h5>\n<p><img data-src=\"image-20240412161148239.png\" alt=\"image-20240412161148239\" /></p>\n<p><img data-src=\"image-20240412161447719.png\" alt=\"image-20240412161447719\" /></p>\n<h5 id=\"使用redission的分布式锁\"><a class=\"anchor\" href=\"#使用redission的分布式锁\">#</a> 使用 Redission 的分布式锁</h5>\n<p><img data-src=\"image-20240412161535930.png\" alt=\"image-20240412161535930\" /></p>\n<p><img data-src=\"image-20240412161908045.png\" alt=\"image-20240412161908045\" /></p>\n<p><img data-src=\"image-20240412161945922.png\" alt=\"image-20240412161945922\" /></p>\n<p><img data-src=\"image-20240412162327381.png\" alt=\"image-20240412162327381\" /></p>\n<p><img data-src=\"image-20240412162658354.png\" alt=\"image-20240412162658354\" /></p>\n<p><img data-src=\"image-20240412163406408.png\" alt=\"image-20240412163406408\" /></p>\n<h4 id=\"优化优惠券秒杀\"><a class=\"anchor\" href=\"#优化优惠券秒杀\">#</a> 优化优惠券秒杀</h4>\n<p>把<strong>抢购</strong>和<strong>下单</strong>分开</p>\n<h5 id=\"基于redis优化秒杀资格判断使用lua脚本\"><a class=\"anchor\" href=\"#基于redis优化秒杀资格判断使用lua脚本\">#</a> 基于 Redis 优化秒杀资格判断（使用 Lua 脚本）</h5>\n<p><img data-src=\"image-20240412164112620.png\" alt=\"image-20240412164112620\" /></p>\n<p><img data-src=\"image-20240412164924880.png\" alt=\"image-20240412164924880\" /></p>\n<h5 id=\"基于阻塞队列优化异步下单\"><a class=\"anchor\" href=\"#基于阻塞队列优化异步下单\">#</a> 基于阻塞队列优化异步下单</h5>\n<p><img data-src=\"image-20240412164621748.png\" alt=\"image-20240412164621748\" /></p>\n<h5 id=\"问题解决消息队列\"><a class=\"anchor\" href=\"#问题解决消息队列\">#</a> 问题 &amp; 解决（消息队列）</h5>\n<p><img data-src=\"image-20240412165449807.png\" alt=\"image-20240412165449807\" /></p>\n<h4 id=\"消息队列\"><a class=\"anchor\" href=\"#消息队列\">#</a> 消息队列</h4>\n<p><img data-src=\"image-20240412180418366.png\" alt=\"image-20240412180418366\" /></p>\n<p><img data-src=\"image-20240412180446142.png\" alt=\"image-20240412180446142\" /></p>\n<p>&lt;img src=&quot;image-20240412183222085.png&quot; alt=&quot;image-20240412183222085&quot; style=&quot;zoom: 50%;&quot; /&gt;</p>\n<h5 id=\"redis的list模拟消息队列\"><a class=\"anchor\" href=\"#redis的list模拟消息队列\">#</a> redis 的 list 模拟消息队列</h5>\n<p>…</p>\n<h5 id=\"pubsub发布订阅\"><a class=\"anchor\" href=\"#pubsub发布订阅\">#</a> pubsub 发布订阅</h5>\n<p><img data-src=\"image-20240412181838756.png\" alt=\"image-20240412181838756\" /></p>\n<h5 id=\"stream类型消息队列\"><a class=\"anchor\" href=\"#stream类型消息队列\">#</a> STREAM 类型消息队列</h5>\n<p><img data-src=\"image-20240412182433868.png\" alt=\"image-20240412182433868\" /></p>\n<p>&lt;img src=&quot;image-20240412182643317.png&quot; alt=&quot;image-20240412182643317&quot; style=&quot;zoom:50%;&quot; /&gt;</p>\n<p>&lt;img src=&quot;image-20240412183033083.png&quot; alt=&quot;image-20240412183033083&quot; style=&quot;zoom:67%;&quot; /&gt;</p>\n<h4 id=\"功能-达人探店\"><a class=\"anchor\" href=\"#功能-达人探店\">#</a> 功能 - 达人探店</h4>\n<h5 id=\"发布\"><a class=\"anchor\" href=\"#发布\">#</a> 发布</h5>\n<p>…</p>\n<h5 id=\"查看\"><a class=\"anchor\" href=\"#查看\">#</a> 查看</h5>\n<p>…</p>\n<h5 id=\"点赞功能\"><a class=\"anchor\" href=\"#点赞功能\">#</a> 点赞功能</h5>\n<p>…</p>\n<h5 id=\"点赞排行榜\"><a class=\"anchor\" href=\"#点赞排行榜\">#</a> 点赞排行榜</h5>\n<p>在 Redis 获取 top n</p>\n<h4 id=\"功能-好友关注\"><a class=\"anchor\" href=\"#功能-好友关注\">#</a> 功能 - 好友关注</h4>\n<h5 id=\"关注取关\"><a class=\"anchor\" href=\"#关注取关\">#</a> 关注取关</h5>\n<p>…</p>\n<h5 id=\"共同关注\"><a class=\"anchor\" href=\"#共同关注\">#</a> 共同关注</h5>\n<p>把关注列表放到 redis，取交集</p>\n<h5 id=\"feed流\"><a class=\"anchor\" href=\"#feed流\">#</a> Feed 流</h5>\n<p><img data-src=\"image-20240412190422462.png\" alt=\"image-20240412190422462\" /></p>\n<p><img data-src=\"image-20240412190413921.png\" alt=\"image-20240412190413921\" /></p>\n<p>实现方案</p>\n<p><img data-src=\"image-20240412190835135.png\" alt=\"image-20240412190835135\" /></p>\n<h5 id=\"推送到粉丝收件箱\"><a class=\"anchor\" href=\"#推送到粉丝收件箱\">#</a> 推送到粉丝收件箱</h5>\n<p>…</p>\n<h5 id=\"滚动分页查询收件箱的思路\"><a class=\"anchor\" href=\"#滚动分页查询收件箱的思路\">#</a> 滚动分页查询收件箱的思路</h5>\n<p>…</p>\n<h5 id=\"实现滚动分页查询\"><a class=\"anchor\" href=\"#实现滚动分页查询\">#</a> 实现滚动分页查询</h5>\n<p>…</p>\n<h4 id=\"附近商户\"><a class=\"anchor\" href=\"#附近商户\">#</a> 附近商户</h4>\n<h5 id=\"geo数据结构\"><a class=\"anchor\" href=\"#geo数据结构\">#</a> GEO 数据结构</h5>\n<p><img data-src=\"image-20240412193025180.png\" alt=\"image-20240412193025180\" /></p>\n<h5 id=\"导入店铺数据到geo\"><a class=\"anchor\" href=\"#导入店铺数据到geo\">#</a> 导入店铺数据到 GEO</h5>\n<p>…</p>\n<h5 id=\"实现附近商户功能\"><a class=\"anchor\" href=\"#实现附近商户功能\">#</a> 实现附近商户功能</h5>\n<p>…</p>\n<p>……</p>\n",
            "tags": [
                "redis",
                "lunix",
                "git"
            ]
        }
    ]
}